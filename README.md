# filler
Проект, в котором нужно написать игрока к игре на подобии "точек".

> Проект [School21](https://21-school.ru/)


### Краткое описание задачи

Есть два игрока и виртуальная машина. Строится поле, на котором расположены две точки, например `x` и `o`, это маркеры игроков.
Каждый ход виртуальная машина подает __игроку__ текущее состояние поля и фигуру, которую необходимо на него поставить.
Игрок должен оценить ситуацию и расположить поданную фигуру на как можно лучшее место.
Определив это место, игрок возвращает координаты установки виртуальной машине.

Фигуры генерируются виртуальной машиной случайным образом. Обычно фигура состоит из 3-6 точек, но все зависит от размера карты.

Для постановки фигур есть некоторые правила:
  - фигура может ставиться только внахлест. То есть хотя бы одна ячейка новой фигуры должна наложиться на уже существующий маркер игрока, расположенный на поле.
  - фигура не может накладываться на макеры противника.

Если виртуальная машина не сможет установить фигуру по всем правилам, то игрок, пославший "плохие" координаты, будет считаться проигравшим.

*[(полное описание)](readme/filler.en.pdf)*

### Решение

Лучший способ победить - окружить соперника, заблокировав ему возможные ходы.

Реализация - тепловая карта.

Находим условный центр фигуры противника, это самая "холодная" точка на карте, там наименьший тепловой коэффициент (ТК), туда мы стремимся.
Есть несколько правил, по которым я присваивал ТК точкам (посмотреть код можно [(тут)](src/heat_map.c)):
  - чем больше удаленность от "центра противника", тем выше ТК.
  - расположение точки у стен карты или вблизи маркера соперника резко понижает ТК. Это сделано для того, чтобы преграждать путь противнику при встрече у стен, и по возможности окружать его.
  - так же есть так называемые абстрактные прямоугольники. Это сектора поля, которые определяются в зависимости от центров фигур противника и игрока.
  Нахождение точки в одном из этих секторов увеличивает или уменьшает ТК. Это сделано, чтобы игрок старался быстро сократить дистанцию с фигурой противника и отрезать его от самой большой части карты, заперев в углу.

### Установка и запуск

1. `git clone https://github.com/qypec/Filler.git`

2. `make`

3. `./resources/filler_vm -p1 ./yquaro.filler -p2 ./resources/players/superjeannot.filler -v -f resources/maps/map01`
 - filler_vm - виртуальная машина, обеспечивающая соревнование
 - p1, p2 - флаги player_1 (нолик), player_2 (крестик), после которых идут исполняемые файлы игроков
 - yquaro.filler - мой игрок. Можно выбрать другого соперника из `resources/players/*` или другую карту `resources/maps/*`, поменять игроков местами

### Визуализация
Карта: `resources/maps/map01`

Соперник: `resources/players/superjeannot.filler`

![](readme/filler_visu.gif)

*Разрабатывалось и тестировалось на MacOS Sierra*
